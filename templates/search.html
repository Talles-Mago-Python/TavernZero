{% extends "base.html" %}

{% block content %}
<div class="search-container">
    <div class="card">
        <h1><i class="fas fa-search"></i> Buscar</h1>
        
        <form method="GET" class="search-form">
            <div class="search-box">
                <input type="text" name="q" value="{{ query }}" placeholder="Buscar grupos ou usuários...">
                <button type="submit"><i class="fas fa-search"></i></button>
            </div>
        </form>
        
        {% if query %}
            <div class="search-results">
                {% if group_results or user_results %}
                    {% if group_results %}
                        <h2>Grupos</h2>
                        <div class="result-grid">
                            {% for group in group_results %}
                            <div class="result-card">
                                <div class="group-avatar">{{ group.name|first|upper }}</div>
                                <div class="group-info">
                                    <h3>{{ group.name }}</h3>
                                    <p>{{ group.description|default('Sem descrição', true) }}</p>
                                    <small>{{ group.members|length }} membros</small>
                                </div>
                                <a href="{{ url_for('group_join', group_id=group.id) }}" class="btn btn-sm">
                                    Entrar
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                    
                    {% if user_results %}
                        <h2>Usuários</h2>
                        <div class="result-grid">
                            {% for user in user_results %}
                            <div class="result-card">
                                <div class="user-avatar">{{ user.username|first|upper }}</div>
                                <div class="user-info">
                                    <h3>{{ user.username }}</h3>
                                    <p>{{ user.bio|default('Sem biografia', true) }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% else %}
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>Nenhum resultado encontrado para "{{ query }}"</p>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}